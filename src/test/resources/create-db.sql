drop table order_item if exists;
drop table Product if exists;
drop table purchase_order if exists;

CREATE TABLE purchase_order (
    id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    version BIGINT not null DEFAULT 0,
    lastModified TIMESTAMP,
    primary key (id)
);

create table Product (
    id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    version BIGINT not null DEFAULT 0,
    lastModified TIMESTAMP,
    productCode varchar(255),
    name varchar(255),
    productType varchar(255),
    primary key (id)
);

CREATE TABLE order_item (
    id INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY,
    order_id INTEGER NOT NULL,
    productCode VARCHAR(255),
    itemCount INTEGER NOT NULL,
    CONSTRAINT item_order_fk FOREIGN KEY (order_id) REFERENCES purchase_order (id),
    CONSTRAINT item_product_fk FOREIGN KEY (productCode) REFERENCES product (productCode)
);